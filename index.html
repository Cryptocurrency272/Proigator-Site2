<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Proigator Token</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Background Nature Sound -->
  <audio autoplay loop>
    <source src="assets/nature-sounds.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <!-- Hero Section -->
  <div class="hero">
    <h1>🐊 Proigator Token</h1>
    <p>The most advanced nature-themed crypto experience</p>
    <button onclick="joinPresale()">Join Presale</button>
    <br><br>
    <button onclick="copyReferral()">Copy Your Referral Link</button>
    <p id="ref-status" style="font-size: 1rem; margin-top: 10px;"></p>
  </div>

  <!-- Features Section -->
  <div class="features">
    <h2>🌿 Why Proigator?</h2>
    <ul>
      <li>VIP dark forest UI</li>
      <li>Relaxing motion & sounds</li>
      <li>Early investors rewards</li>
      <li>Real-time presale metrics</li>
    </ul>
  </div>

  <!-- Referral Cashback Section -->
  <div class="features">
    <h2>💸 Referral Cashback</h2>
    <p>Invite and earn automatically when people buy through your link:</p>
    <ul>
      <li><strong>30%</strong> Direct Cashback — for buyers using your referral link</li>
      <li><strong>5%</strong> Indirect Cashback — when your invitees refer others</li>
    </ul>
  </div>

  <script>
    let walletAddress = null;

    // On load: capture ?ref=0x... from the URL
    const params = new URLSearchParams(window.location.search);
    const referrer = params.get("ref");
    if (referrer) {
      localStorage.setItem("referrer", referrer);
    }

    // Connect wallet
    async function connectWallet() {
      if (window.ethereum) {
        const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
        walletAddress = accounts[0];
        return walletAddress;
      } else {
        alert("Please install MetaMask or a Web3 wallet");
      }
    }

    // Simulated presale join
    async function joinPresale() {
      const user = await connectWallet();
      const ref = localStorage.getItem("referrer");
      alert(`✅ Presale Placeholder\nYour Wallet: ${user}\nReferred by: ${ref || "None"}`);
    }

    // Generate and copy referral link
    async function copyReferral() {
      const user = await connectWallet();
      const url = `${window.location.origin}${window.location.pathname}?ref=${user}`;
      await navigator.clipboard.writeText(url);
      document.getElementById("ref-status").innerText = "🔗 Referral link copied!";
    }
  </script>
</body>
</html>
